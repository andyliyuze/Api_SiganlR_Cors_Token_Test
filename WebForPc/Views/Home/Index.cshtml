<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>signalr</title>

</head>

<body>

    <div id="app">
       
        
    </div>
    <input  id="message"/>
    <button id="send">ok</button>
    <script src="~/Scripts/jquery-1.10.2.js"></script>

    

    <!--Reference the SignalR library. -->
    
    <script src="/Scripts/jquery.signalR-2.2.2.min.js">
    </script>

    <!--Reference the autogenerated SignalR hub script. -->
    <script src="http://localhost:52026/signalr/js"></script>
    <script src="http://localhost:52026/signalr/hubs"></script>
 
    @*<script>
new Vue({
  el: '#app',
data: function () {
    return {
      name: null,
      message: null,
      chat: null,
      messages: []
    }
  },
  created () {
    var vm = this
    $.connection.hub.url = 'http://localhost:52026/signalr';
    this.chat = $.connection.chatHub
    this.chat.client.broadcastMessage = function (name, message) {
      vm.broadcast(name, message)
    }
    this.chat.client.send = function (to, from, message) {
      vm.broadcast(from, message)
    };
    $.connection.hub.start()
  },
  methods: {
    send: function () {
      this.chat.server.send(this.name, this.message)
    },
    broadcast: function (name, message) {
      this.messages.push({name: name, message: message})
    }
  }

})
    </script>*@

    <script>
        $("#send").click(function ()
        {
            var message = $("#message").val();
            chatHub.server.send(message);
        });
    
    </script>
    <script>
        $.connection.hub.logging = true;
        $.connection.hub.url = 'http://localhost:52026/signalr';
        $.connection.hub.qs = { "token": "123123123" };
        var chatHub = $.connection.chatHub;
        registerClientMethodsForChat(chatHub);
        $.connection.hub.start().done(function () {
         
 
            console.log("连接完成");
        });


        function registerClientMethodsForChat(chatHub)       
        {
            chatHub.client.broadcastMessage = function (message)
            {
                console.log(message);
            }
        }
    </script>
</body>
</html>
